import{r as s,u as Q,c as le,g as B,d as G,e as $,j as o,s as j,f as A,T as L,h as X,i as k,m as Y,k as ce,l as de,n as pe,o as Z,t as K,w as ue,q as me,S as H,B as q,v as fe,x as ge,p as ve,H as he,a as xe}from"./index-DQUMyb3g.js";import{g as ye,o as W,u as be,F as Ce,L as R,i as Ie,a as ee,b as V,c as Se,l as D,O as Le,P as Re,d as Ae,e as je,A as te,C as Ee,D as se,M as we}from"./message-add-CGKVbOdT.js";function ne(e){return e.substring(2).toLowerCase()}function Pe(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function Me(e){const{children:t,disableReactTree:n=!1,mouseEvent:a="onClick",onClickAway:i,touchEvent:r="onTouchEnd"}=e,l=s.useRef(!1),c=s.useRef(null),u=s.useRef(!1),g=s.useRef(!1);s.useEffect(()=>(setTimeout(()=>{u.current=!0},0),()=>{u.current=!1}),[]);const x=Q(ye(t),c),v=le(d=>{const m=g.current;g.current=!1;const f=W(c.current);if(!u.current||!c.current||"clientX"in d&&Pe(d,f))return;if(l.current){l.current=!1;return}let p;d.composedPath?p=d.composedPath().includes(c.current):p=!f.documentElement.contains(d.target)||c.current.contains(d.target),!p&&(n||!m)&&i(d)}),h=d=>m=>{g.current=!0;const f=t.props[d];f&&f(m)},y={ref:x};return r!==!1&&(y[r]=h(r)),s.useEffect(()=>{if(r!==!1){const d=ne(r),m=W(c.current),f=()=>{l.current=!0};return m.addEventListener(d,v),m.addEventListener("touchmove",f),()=>{m.removeEventListener(d,v),m.removeEventListener("touchmove",f)}}},[v,r]),a!==!1&&(y[a]=h(a)),s.useEffect(()=>{if(a!==!1){const d=ne(a),m=W(c.current);return m.addEventListener(d,v),()=>{m.removeEventListener(d,v)}}},[v,a]),s.cloneElement(t,y)}function $e(e){return G("MuiInputAdornment",e)}const oe=B("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var ae;const ke=(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${X(n.position)}`],n.disablePointerEvents===!0&&t.disablePointerEvents,t[n.variant]]},Te=e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:a,position:i,size:r,variant:l}=e,c={root:["root",n&&"disablePointerEvents",i&&`position${X(i)}`,l,a&&"hiddenLabel",r&&`size${X(r)}`]};return k(c,$e,t)},Fe=j("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:ke})(Y(({theme:e})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${oe.positionStart}&:not(.${oe.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),Ne=s.forwardRef(function(t,n){const a=$({props:t,name:"MuiInputAdornment"}),{children:i,className:r,component:l="div",disablePointerEvents:c=!1,disableTypography:u=!1,position:g,variant:x,...v}=a,h=be()||{};let y=x;x&&h.variant,h&&!y&&(y=h.variant);const d={...a,hiddenLabel:h.hiddenLabel,size:h.size,disablePointerEvents:c,position:g,variant:y},m=Te(d);return o.jsx(Ce.Provider,{value:null,children:o.jsx(Fe,{as:l,ownerState:d,className:A(m.root,r),ref:n,...v,children:typeof i=="string"&&!u?o.jsx(L,{color:"textSecondary",children:i}):o.jsxs(s.Fragment,{children:[g==="start"?ae||(ae=o.jsx("span",{className:"notranslate","aria-hidden":!0,children:"â€‹"})):null,i]})})})});function Be(e){return G("MuiListItem",e)}B("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function Ge(e){return G("MuiListItemButton",e)}const M=B("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),Oe=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]},Ue=e=>{const{alignItems:t,classes:n,dense:a,disabled:i,disableGutters:r,divider:l,selected:c}=e,g=k({root:["root",a&&"dense",!r&&"gutters",l&&"divider",i&&"disabled",t==="flex-start"&&"alignItemsFlexStart",c&&"selected"]},Ge,n);return{...n,...g}},Ze=j(de,{shouldForwardProp:e=>pe(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:Oe})(Y(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${M.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Z(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${M.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Z(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${M.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Z(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Z(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${M.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${M.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.dense,style:{paddingTop:4,paddingBottom:4}}]}))),De=s.forwardRef(function(t,n){const a=$({props:t,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:r=!1,component:l="div",children:c,dense:u=!1,disableGutters:g=!1,divider:x=!1,focusVisibleClassName:v,selected:h=!1,className:y,...d}=a,m=s.useContext(R),f=s.useMemo(()=>({dense:u||m.dense||!1,alignItems:i,disableGutters:g}),[i,m.dense,u,g]),p=s.useRef(null);ce(()=>{r&&p.current&&p.current.focus()},[r]);const b={...a,alignItems:i,dense:f.dense,disableGutters:g,divider:x,selected:h},C=Ue(b),S=Q(p,n);return o.jsx(R.Provider,{value:f,children:o.jsx(Ze,{ref:S,href:d.href||d.to,component:(d.href||d.to)&&l==="div"?"button":l,focusVisibleClassName:A(C.focusVisible,v),ownerState:b,className:A(C.root,y),...d,classes:C,children:c})})});function ze(e){return G("MuiListItemSecondaryAction",e)}B("MuiListItemSecondaryAction",["root","disableGutters"]);const He=e=>{const{disableGutters:t,classes:n}=e;return k({root:["root",t&&"disableGutters"]},ze,n)},We=j("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),re=s.forwardRef(function(t,n){const a=$({props:t,name:"MuiListItemSecondaryAction"}),{className:i,...r}=a,l=s.useContext(R),c={...a,disableGutters:l.disableGutters},u=He(c);return o.jsx(We,{className:A(u.root,i),ownerState:c,ref:n,...r})});re.muiName="ListItemSecondaryAction";const Ve=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.hasSecondaryAction&&t.secondaryAction]},Xe=e=>{const{alignItems:t,classes:n,dense:a,disableGutters:i,disablePadding:r,divider:l,hasSecondaryAction:c}=e;return k({root:["root",a&&"dense",!i&&"gutters",!r&&"padding",l&&"divider",t==="flex-start"&&"alignItemsFlexStart",c&&"secondaryAction"],container:["container"]},Be,n)},qe=j("div",{name:"MuiListItem",slot:"Root",overridesResolver:Ve})(Y(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${M.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),Qe=j("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),Ye=s.forwardRef(function(t,n){const a=$({props:t,name:"MuiListItem"}),{alignItems:i="center",children:r,className:l,component:c,components:u={},componentsProps:g={},ContainerComponent:x="li",ContainerProps:{className:v,...h}={},dense:y=!1,disableGutters:d=!1,disablePadding:m=!1,divider:f=!1,secondaryAction:p,slotProps:b={},slots:C={},...S}=a,E=s.useContext(R),T=s.useMemo(()=>({dense:y||E.dense||!1,alignItems:i,disableGutters:d}),[i,E.dense,y,d]),z=s.useRef(null),I=s.Children.toArray(r),O=I.length&&Ie(I[I.length-1],["ListItemSecondaryAction"]),w={...a,alignItems:i,dense:T.dense,disableGutters:d,disablePadding:m,divider:f,hasSecondaryAction:O},_=Xe(w),J=Q(z,n),U=C.root||u.Root||qe,F=b.root||g.root||{},N={className:A(_.root,F.className,l),...S};let P=c||"li";return O?(P=!N.component&&!c?"div":P,x==="li"&&(P==="li"?P="div":N.component==="li"&&(N.component="div")),o.jsx(R.Provider,{value:T,children:o.jsxs(Qe,{as:x,className:A(_.container,v),ref:J,ownerState:w,...h,children:[o.jsx(U,{...F,...!ee(U)&&{as:P,ownerState:{...w,...F.ownerState}},...N,children:I}),I.pop()]})})):o.jsx(R.Provider,{value:T,children:o.jsxs(U,{...F,as:P,ref:J,...!ee(U)&&{ownerState:{...w,...F.ownerState}},...N,children:[I,p&&o.jsx(re,{children:p})]})})});function _e(e){return G("MuiListItemAvatar",e)}B("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Je=e=>{const{alignItems:t,classes:n}=e;return k({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},_e,n)},Ke=j("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),et=s.forwardRef(function(t,n){const a=$({props:t,name:"MuiListItemAvatar"}),{className:i,...r}=a,l=s.useContext(R),c={...a,alignItems:l.alignItems},u=Je(c);return o.jsx(Ke,{className:A(u.root,i),ownerState:c,ref:n,...r})}),tt=e=>{const{classes:t,inset:n,primary:a,secondary:i,dense:r}=e;return k({root:["root",n&&"inset",r&&"dense",a&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},Se,t)},st=j("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${D.primary}`]:t.primary},{[`& .${D.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${K.root}:where(& .${D.primary})`]:{display:"block"},[`.${K.root}:where(& .${D.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),nt=s.forwardRef(function(t,n){const a=$({props:t,name:"MuiListItemText"}),{children:i,className:r,disableTypography:l=!1,inset:c=!1,primary:u,primaryTypographyProps:g,secondary:x,secondaryTypographyProps:v,slots:h={},slotProps:y={},...d}=a,{dense:m}=s.useContext(R);let f=u??i,p=x;const b={...a,disableTypography:l,inset:c,primary:!!f,secondary:!!p,dense:m},C=tt(b),S={slots:h,slotProps:{primary:g,secondary:v,...y}},[E,T]=V("root",{className:A(C.root,r),elementType:st,externalForwardedProps:{...S,...d},ownerState:b,ref:n}),[z,I]=V("primary",{className:C.primary,elementType:L,externalForwardedProps:S,ownerState:b}),[O,w]=V("secondary",{className:C.secondary,elementType:L,externalForwardedProps:S,ownerState:b});return f!=null&&f.type!==L&&!l&&(f=o.jsx(z,{variant:m?"body2":"body1",component:I!=null&&I.variant?void 0:"span",...I,children:f})),p!=null&&p.type!==L&&!l&&(p=o.jsx(O,{variant:"body2",color:"textSecondary",...w,children:p})),o.jsxs(E,{...T,children:[f,p]})}),ot=new Map([["bold",s.createElement(s.Fragment,null,s.createElement("path",{d:"M232.49,215.51,185,168a92.12,92.12,0,1,0-17,17l47.53,47.54a12,12,0,0,0,17-17ZM44,112a68,68,0,1,1,68,68A68.07,68.07,0,0,1,44,112Z"}))],["duotone",s.createElement(s.Fragment,null,s.createElement("path",{d:"M192,112a80,80,0,1,1-80-80A80,80,0,0,1,192,112Z",opacity:"0.2"}),s.createElement("path",{d:"M229.66,218.34,179.6,168.28a88.21,88.21,0,1,0-11.32,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"}))],["fill",s.createElement(s.Fragment,null,s.createElement("path",{d:"M168,112a56,56,0,1,1-56-56A56,56,0,0,1,168,112Zm61.66,117.66a8,8,0,0,1-11.32,0l-50.06-50.07a88,88,0,1,1,11.32-11.31l50.06,50.06A8,8,0,0,1,229.66,229.66ZM112,184a72,72,0,1,0-72-72A72.08,72.08,0,0,0,112,184Z"}))],["light",s.createElement(s.Fragment,null,s.createElement("path",{d:"M228.24,219.76l-51.38-51.38a86.15,86.15,0,1,0-8.48,8.48l51.38,51.38a6,6,0,0,0,8.48-8.48ZM38,112a74,74,0,1,1,74,74A74.09,74.09,0,0,1,38,112Z"}))],["regular",s.createElement(s.Fragment,null,s.createElement("path",{d:"M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"}))],["thin",s.createElement(s.Fragment,null,s.createElement("path",{d:"M226.83,221.17l-52.7-52.7a84.1,84.1,0,1,0-5.66,5.66l52.7,52.7a4,4,0,0,0,5.66-5.66ZM36,112a76,76,0,1,1,76,76A76.08,76.08,0,0,1,36,112Z"}))]]),ie=s.forwardRef((e,t)=>s.createElement(ue,{ref:t,...e,weights:ot}));ie.displayName="MagnifyingGlassIcon";const at=ie;function rt({contacts:e,onRecipientAdd:t,onRecipientRemove:n,recipients:a=[]}){const i=s.useRef(null),[r,l]=s.useState(!1),[c,u]=s.useState(""),[g,x]=s.useState([]),v=r&&!!c,h=g.length>0,y=s.useCallback(async p=>{const b=p.target.value;if(u(b),!b){x([]);return}try{const C=e.filter(S=>a.some(E=>E.id===S.id)?!1:S.name.toLowerCase().includes(b.toLowerCase()));x(C)}catch(C){me.error(C)}},[e,a]),d=s.useCallback(()=>{v&&l(!1)},[v]),m=s.useCallback(()=>{l(!0)},[]),f=s.useCallback(p=>{u(""),t==null||t(p)},[t]);return o.jsxs(H,{direction:"row",spacing:2,sx:{alignItems:"center",overflowX:"auto",p:2},children:[o.jsx(Me,{onClickAway:d,children:o.jsxs("div",{children:[o.jsx(Le,{onChange:y,onFocus:m,placeholder:"Search contacts",ref:i,startAdornment:o.jsx(Ne,{position:"start",children:o.jsx(at,{fontSize:"var(--icon-fontSize-md)"})}),sx:{minWidth:"260px"},value:c}),v?o.jsx(Re,{anchorEl:i.current,open:r,placement:"bottom-start",children:o.jsx(Ae,{sx:{border:"1px solid var(--mui-palette-divider)",boxShadow:"var(--mui-shadows-16)",maxWidth:"100%",mt:1,width:"320px"},children:h?o.jsxs(s.Fragment,{children:[o.jsx(q,{sx:{px:3,py:2},children:o.jsx(L,{color:"text.secondary",variant:"subtitle2",children:"Contacts"})}),o.jsx(je,{sx:{p:1,"& .MuiListItemButton-root":{borderRadius:1}},children:g.map(p=>o.jsx(Ye,{disablePadding:!0,children:o.jsxs(De,{onClick:()=>{f(p)},children:[o.jsx(et,{children:o.jsx(te,{src:p.avatar,sx:{"--Avatar-size":"32px"}})}),o.jsx(nt,{disableTypography:!0,primary:o.jsx(L,{noWrap:!0,variant:"subtitle2",children:p.name})})]})},p.id))})]}):o.jsxs(H,{spacing:1,sx:{p:2,textAlign:"center"},children:[o.jsx(L,{variant:"h6",children:"Nothing found"}),o.jsxs(L,{color:"text.secondary",variant:"body2",children:[`We couldn't find any matches for "`,c,'". Try checking for typos or using complete words.']})]})})}):null]})}),o.jsx(L,{color:"text.secondary",variant:"body2",children:"To:"}),o.jsx(H,{direction:"row",spacing:2,sx:{alignItems:"center",overflowX:"auto"},children:a.map(p=>o.jsx(Ee,{avatar:o.jsx(te,{src:p.avatar}),label:p.name,onDelete:()=>{n==null||n(p.id)}},p.id))})]})}function it(){const[e,t]=s.useState([]),n=s.useCallback(i=>{t(r=>r.find(c=>c.id===i.id)?r:[...r,i])},[]),a=s.useCallback(i=>{t(r=>r.filter(l=>l.id!==i))},[]);return{handleRecipientAdd:n,handleRecipientRemove:a,recipients:e}}function lt(){const e=fe(),{contacts:t,createThread:n,createMessage:a}=s.useContext(ge),{handleRecipientAdd:i,handleRecipientRemove:r,recipients:l}=it(),c=s.useCallback(async(u,g)=>{const x=l.map(h=>h.id),v=n({type:"group",recipientIds:x});a({threadId:v,type:u,content:g}),e(ve.dashboard.chat.thread("group",v))},[e,n,a,l]);return o.jsxs(q,{sx:{display:"flex",flex:"1 1 auto",flexDirection:"column",minHeight:0},children:[o.jsx(rt,{contacts:t,onRecipientAdd:i,onRecipientRemove:r,recipients:l}),o.jsx(se,{}),o.jsx(q,{sx:{flex:"1 1 auto"}}),o.jsx(se,{}),o.jsx(we,{disabled:l.length===0,onSend:c})]})}const ct={title:`Compose | Chat | Dashboard | ${xe.name}`};function ut(){return o.jsxs(s.Fragment,{children:[o.jsx(he,{children:o.jsx("title",{children:ct.title})}),o.jsx(lt,{})]})}export{ut as Page};
