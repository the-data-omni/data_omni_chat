import{cv as k,r as o,bF as B,j as e,S as c,B as b,p as j,R as v,cu as I,T as w,W as y,b as S,D as E,ak as u,al as g,am as x,bH as d,au as P,bd as D,be as C,b0 as H,aZ as U,H as q,a as R}from"./index-C5-7V04H.js";import{u as T,C as m,t as z,z as i}from"./index-DvGAAjB3.js";import{a as N}from"./client-CgbzrkY0.js";import{S as O}from"./split-layout-C-JKiTiu.js";const W=[{id:"google",name:"Google",logo:"/assets/logo-google.svg"},{id:"discord",name:"Discord",logo:"/assets/logo-discord.svg"}],G=i.object({firstName:i.string().min(1,{message:"First name is required"}),lastName:i.string().min(1,{message:"Last name is required"}),email:i.string().min(1,{message:"Email is required"}).email(),password:i.string().min(6,{message:"Password should be at least 6 characters"}),terms:i.boolean().refine(a=>a,"You must accept the terms and conditions")}),V={firstName:"",lastName:"",email:"",password:"",terms:!1};function Y(){const a=k(),[t,n]=o.useState(!1),{control:l,handleSubmit:F,setError:p,formState:{errors:r}}=T({defaultValues:V,resolver:z(G)}),L=o.useCallback(async s=>{n(!0);const{error:h}=await N.signInWithOAuth({provider:s});if(h){n(!1),B.error(h);return}n(!1)},[]),A=o.useCallback(async s=>{n(!0);const{data:h,error:f}=await N.signUp(s);if(f){p("root",{type:"server",message:f}),n(!1);return}a.setUser(h.user)},[a,p]);return e.jsxs(c,{spacing:4,children:[e.jsx("div",{children:e.jsx(b,{component:v,href:j.home,sx:{display:"inline-block",fontSize:0},children:e.jsx(I,{colorDark:"light",colorLight:"dark",height:32,width:122})})}),e.jsxs(c,{spacing:1,children:[e.jsx(w,{variant:"h5",children:"Sign up"}),e.jsxs(w,{color:"text.secondary",variant:"body2",children:["Already have an account?"," ",e.jsx(y,{component:v,href:j.auth.custom.signIn,variant:"subtitle2",children:"Sign in"})]})]}),e.jsxs(c,{spacing:3,children:[e.jsx(c,{spacing:2,children:W.map(s=>e.jsxs(S,{color:"secondary",disabled:t,endIcon:e.jsx(b,{alt:"",component:"img",height:24,src:s.logo,width:24}),onClick:()=>{L(s.id).catch(()=>{})},variant:"outlined",children:["Continue with ",s.name]},s.id))}),e.jsx(E,{children:"or"}),e.jsx("form",{onSubmit:F(A),children:e.jsxs(c,{spacing:2,children:[e.jsx(m,{control:l,name:"firstName",render:({field:s})=>e.jsxs(u,{error:!!r.firstName,children:[e.jsx(g,{children:"First name"}),e.jsx(x,{...s}),r.firstName?e.jsx(d,{children:r.firstName.message}):null]})}),e.jsx(m,{control:l,name:"lastName",render:({field:s})=>e.jsxs(u,{error:!!r.lastName,children:[e.jsx(g,{children:"Last name"}),e.jsx(x,{...s}),r.lastName?e.jsx(d,{children:r.lastName.message}):null]})}),e.jsx(m,{control:l,name:"email",render:({field:s})=>e.jsxs(u,{error:!!r.email,children:[e.jsx(g,{children:"Email address"}),e.jsx(x,{...s,type:"email"}),r.email?e.jsx(d,{children:r.email.message}):null]})}),e.jsx(m,{control:l,name:"password",render:({field:s})=>e.jsxs(u,{error:!!r.password,children:[e.jsx(g,{children:"Password"}),e.jsx(x,{...s,type:"password"}),r.password?e.jsx(d,{children:r.password.message}):null]})}),e.jsx(m,{control:l,name:"terms",render:({field:s})=>e.jsxs("div",{children:[e.jsx(P,{control:e.jsx(D,{...s}),label:e.jsxs(o.Fragment,{children:["I have read the ",e.jsx(y,{children:"terms and conditions"})]})}),r.terms?e.jsx(d,{error:!0,children:r.terms.message}):null]})}),r.root?e.jsx(C,{color:"error",children:r.root.message}):null,e.jsx(S,{disabled:t,type:"submit",variant:"contained",children:"Create account"})]})})]}),e.jsx(C,{color:"warning",children:"Created users are not persisted"})]})}const Z={title:`Sign up | Custom | Auth | ${R.name}`};function Q(){const{isAuthenticated:a,isLoading:t}=k(),n=H();return o.useEffect(()=>{t||!a||(U.debug("[Sign up] User is authenticated, redirecting to dashboard"),n(j.dashboard.overview))},[a,t,n]),t||a?null:e.jsxs(o.Fragment,{children:[e.jsx(q,{children:e.jsx("title",{children:Z.title})}),e.jsx(O,{children:e.jsx(Y,{})})]})}export{Q as Page};
