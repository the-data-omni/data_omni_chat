import{r as i,b0 as T,p as r,bF as U,j as e,S as m,B as S,R as v,cu as B,T as y,W as C,b as k,D as I,ak as x,al as j,am as p,bH as h,au as R,bd as A,be as D,H as E,a as H}from"./index-C5-7V04H.js";import{S as q}from"./split-layout-C-JKiTiu.js";import{u as $,C as u,t as z,z as t}from"./index-DvGAAjB3.js";import{c as O}from"./client-B6InYSCG.js";const W=[{id:"google",name:"Google",logo:"/assets/logo-google.svg"},{id:"discord",name:"Discord",logo:"/assets/logo-discord.svg"}],G=t.object({firstName:t.string().min(1,{message:"First name is required"}),lastName:t.string().min(1,{message:"Last name is required"}),email:t.string().min(1,{message:"Email is required"}).email(),password:t.string().min(6,{message:"Password should be at least 6 characters"}),terms:t.boolean().refine(n=>n,"You must accept the terms and conditions")}),V={firstName:"",lastName:"",email:"",password:"",terms:!1};function Y(){const[n]=i.useState(O()),b=T(),[f,o]=i.useState(!1),{control:l,handleSubmit:N,setError:w,formState:{errors:a}}=$({defaultValues:V,resolver:z(G)}),L=i.useCallback(async s=>{o(!0);const c=new URL(r.auth.supabase.callback,globalThis.location.origin);c.searchParams.set("next",r.dashboard.overview);const{data:g,error:d}=await n.auth.signInWithOAuth({provider:s,options:{redirectTo:c.href}});if(d){o(!1),U.error(d.message);return}globalThis.location.href=g.url},[n]),F=i.useCallback(async s=>{o(!0);const c=new URL(r.auth.supabase.callback,globalThis.location.origin);c.searchParams.set("next",r.dashboard.overview);const{data:g,error:d}=await n.auth.signUp({email:s.email,password:s.password,options:{emailRedirectTo:c.href}});if(d){w("root",{type:"server",message:d.message}),o(!1);return}if(!g.session){if(g.user){const P=new URLSearchParams({email:s.email});b(`${r.auth.supabase.signUpConfirm}?${P.toString()}`);return}o(!1)}},[n,b,w]);return e.jsxs(m,{spacing:4,children:[e.jsx("div",{children:e.jsx(S,{component:v,href:r.home,sx:{display:"inline-block",fontSize:0},children:e.jsx(B,{colorDark:"light",colorLight:"dark",height:32,width:122})})}),e.jsxs(m,{spacing:1,children:[e.jsx(y,{variant:"h5",children:"Sign up"}),e.jsxs(y,{color:"text.secondary",variant:"body2",children:["Already have an account?"," ",e.jsx(C,{component:v,href:r.auth.supabase.signIn,variant:"subtitle2",children:"Sign in"})]})]}),e.jsxs(m,{spacing:3,children:[e.jsx(m,{spacing:2,children:W.map(s=>e.jsxs(k,{color:"secondary",disabled:f,endIcon:e.jsx(S,{alt:"",component:"img",height:24,src:s.logo,width:24}),onClick:()=>{L(s.id).catch(()=>{})},variant:"outlined",children:["Continue with ",s.name]},s.id))}),e.jsx(I,{children:"or"}),e.jsx("form",{onSubmit:N(F),children:e.jsxs(m,{spacing:2,children:[e.jsx(u,{control:l,name:"firstName",render:({field:s})=>e.jsxs(x,{error:!!a.firstName,children:[e.jsx(j,{children:"First name"}),e.jsx(p,{...s}),a.firstName?e.jsx(h,{children:a.firstName.message}):null]})}),e.jsx(u,{control:l,name:"lastName",render:({field:s})=>e.jsxs(x,{error:!!a.lastName,children:[e.jsx(j,{children:"Last name"}),e.jsx(p,{...s}),a.lastName?e.jsx(h,{children:a.lastName.message}):null]})}),e.jsx(u,{control:l,name:"email",render:({field:s})=>e.jsxs(x,{error:!!a.email,children:[e.jsx(j,{children:"Email address"}),e.jsx(p,{...s,type:"email"}),a.email?e.jsx(h,{children:a.email.message}):null]})}),e.jsx(u,{control:l,name:"password",render:({field:s})=>e.jsxs(x,{error:!!a.password,children:[e.jsx(j,{children:"Password"}),e.jsx(p,{...s,type:"password"}),a.password?e.jsx(h,{children:a.password.message}):null]})}),e.jsx(u,{control:l,name:"terms",render:({field:s})=>e.jsxs("div",{children:[e.jsx(R,{control:e.jsx(A,{...s}),label:e.jsxs(i.Fragment,{children:["I have read the ",e.jsx(C,{children:"terms and conditions"})]})}),a.terms?e.jsx(h,{error:!0,children:a.terms.message}):null]})}),a.root?e.jsx(D,{color:"error",children:a.root.message}):null,e.jsx(k,{disabled:f,type:"submit",variant:"contained",children:"Create account"})]})})]})]})}const J={title:`Sign up | Supabase | Auth | ${H.name}`};function Z(){return e.jsxs(i.Fragment,{children:[e.jsx(E,{children:e.jsx("title",{children:J.title})}),e.jsx(q,{children:e.jsx(Y,{})})]})}export{Z as Page};
