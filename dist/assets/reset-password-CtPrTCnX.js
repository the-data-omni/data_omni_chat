import{r as t,b0 as b,p as r,j as e,S as o,B as f,R as S,cu as y,T as k,ak as w,al as P,am as v,bH as L,be as R,b as C,H as E,a as F}from"./index-C5-7V04H.js";import{S as T}from"./split-layout-C-JKiTiu.js";import{u as B,C as H,t as I,z as u}from"./index-DvGAAjB3.js";import{c as U}from"./client-B6InYSCG.js";const $=u.object({email:u.string().min(1,{message:"Email is required"}).email()}),z={email:""};function A(){const[i]=t.useState(U()),n=b(),[h,l]=t.useState(!1),{control:p,handleSubmit:x,setError:c,formState:{errors:s}}=B({defaultValues:z,resolver:I($)}),g=t.useCallback(async a=>{l(!0);const m=new URL(r.auth.supabase.callback,globalThis.location.origin);m.searchParams.set("next",r.auth.supabase.updatePassword);const{error:d}=await i.auth.resetPasswordForEmail(a.email,{redirectTo:m.href});if(d){c("root",{type:"server",message:d.message}),l(!1);return}const j=new URLSearchParams({email:a.email});n(`${r.auth.supabase.recoveryLinkSent}?${j.toString()}`)},[i,n,c]);return e.jsxs(o,{spacing:4,children:[e.jsx("div",{children:e.jsx(f,{component:S,href:r.home,sx:{display:"inline-block",fontSize:0},children:e.jsx(y,{colorDark:"light",colorLight:"dark",height:32,width:122})})}),e.jsx(k,{variant:"h5",children:"Reset password"}),e.jsx("form",{onSubmit:x(g),children:e.jsx(o,{spacing:3,children:e.jsxs(o,{spacing:2,children:[e.jsx(H,{control:p,name:"email",render:({field:a})=>e.jsxs(w,{error:!!s.email,children:[e.jsx(P,{children:"Email address"}),e.jsx(v,{...a,type:"email"}),s.email?e.jsx(L,{children:s.email.message}):null]})}),s.root?e.jsx(R,{color:"error",children:s.root.message}):null,e.jsx(C,{disabled:h,type:"submit",variant:"contained",children:"Send recovery link"})]})})})]})}const D={title:`Reset password | Supabase | Auth | ${F.name}`};function G(){return e.jsxs(t.Fragment,{children:[e.jsx(E,{children:e.jsx("title",{children:D.title})}),e.jsx(T,{children:e.jsx(A,{})})]})}export{G as Page};
