import{cv as F,r as i,bF as D,j as s,S as t,B as f,p as h,R as m,cu as E,T as d,W as w,b as v,D as B,ak as S,al as b,am as y,bH as k,be as C,b0 as W,aZ as H,H as R,a as U}from"./index-C5-7V04H.js";import{u as T,C as P,t as q,z as u}from"./index-DvGAAjB3.js";import{n as O,R as G}from"./EyeSlash-CtcCRaqc.js";import{a as A}from"./client-CgbzrkY0.js";import{S as N}from"./split-layout-C-JKiTiu.js";const V=[{id:"google",name:"Google",logo:"/assets/logo-google.svg"},{id:"discord",name:"Discord",logo:"/assets/logo-discord.svg"}],Z=u.object({email:u.string().min(1,{message:"Email is required"}).email(),password:u.string().min(1,{message:"Password is required"})}),$={email:"",password:""};function J(){const r=F(),[o,a]=i.useState(),[g,l]=i.useState(!1),{control:x,handleSubmit:I,setError:p,formState:{errors:n}}=T({defaultValues:$,resolver:q(Z)}),L=i.useCallback(async e=>{l(!0);const{error:c}=await A.signInWithOAuth({provider:e});if(c){l(!1),D.error(c);return}l(!1)},[]),z=i.useCallback(async e=>{l(!0);const{data:c,error:j}=await A.signInWithPassword(e);if(j){p("root",{type:"server",message:j}),l(!1);return}r.setUser(c.user)},[r,p]);return s.jsxs(t,{spacing:4,children:[s.jsx("div",{children:s.jsx(f,{component:m,href:h.home,sx:{display:"inline-block",fontSize:0},children:s.jsx(E,{colorDark:"light",colorLight:"dark",height:32,width:122})})}),s.jsxs(t,{spacing:1,children:[s.jsx(d,{variant:"h5",children:"Sign in"}),s.jsxs(d,{color:"text.secondary",variant:"body2",children:["Don't have an account?"," ",s.jsx(w,{component:m,href:h.auth.custom.signUp,variant:"subtitle2",children:"Sign up"})]})]}),s.jsxs(t,{spacing:3,children:[s.jsx(t,{spacing:2,children:V.map(e=>s.jsxs(v,{color:"secondary",disabled:g,endIcon:s.jsx(f,{alt:"",component:"img",height:24,src:e.logo,width:24}),onClick:()=>{L(e.id).catch(()=>{})},variant:"outlined",children:["Continue with ",e.name]},e.id))}),s.jsx(B,{children:"or"}),s.jsxs(t,{spacing:2,children:[s.jsx("form",{onSubmit:I(z),children:s.jsxs(t,{spacing:2,children:[s.jsx(P,{control:x,name:"email",render:({field:e})=>s.jsxs(S,{error:!!n.email,children:[s.jsx(b,{children:"Email address"}),s.jsx(y,{...e,type:"email"}),n.email?s.jsx(k,{children:n.email.message}):null]})}),s.jsx(P,{control:x,name:"password",render:({field:e})=>s.jsxs(S,{error:!!n.password,children:[s.jsx(b,{children:"Password"}),s.jsx(y,{...e,endAdornment:o?s.jsx(O,{cursor:"pointer",fontSize:"var(--icon-fontSize-md)",onClick:()=>{a(!1)}}):s.jsx(G,{cursor:"pointer",fontSize:"var(--icon-fontSize-md)",onClick:()=>{a(!0)}}),type:o?"text":"password"}),n.password?s.jsx(k,{children:n.password.message}):null]})}),n.root?s.jsx(C,{color:"error",children:n.root.message}):null,s.jsx(v,{disabled:g,type:"submit",variant:"contained",children:"Sign in"})]})}),s.jsx("div",{children:s.jsx(w,{component:m,href:h.auth.custom.resetPassword,variant:"subtitle2",children:"Forgot password?"})})]})]}),s.jsxs(C,{color:"warning",children:["Use"," ",s.jsx(d,{component:"span",sx:{fontWeight:700},variant:"inherit",children:"sofia@devias.io"})," ","with password"," ",s.jsx(d,{component:"span",sx:{fontWeight:700},variant:"inherit",children:"Secret1"})]})]})}const K={title:`Sign in | Custom | Auth | ${U.name}`};function ss(){const{isAuthenticated:r,isLoading:o}=F(),a=W();return i.useEffect(()=>{o||!r||(H.debug("[Sign in] User is authenticated, redirecting to dashboard"),a(h.dashboard.overview))},[r,o,a]),o||r?null:s.jsxs(i.Fragment,{children:[s.jsx(R,{children:s.jsx("title",{children:K.title})}),s.jsx(N,{children:s.jsx(J,{})})]})}export{ss as Page};
