import{r as e,b0 as b,aZ as t,bF as d,p as l,j as k,be as w}from"./index-C5-7V04H.js";import{c as x}from"./client-B6InYSCG.js";function P(){const[a]=e.useState(x()),s=b(),n=e.useRef(!1),[o,c]=e.useState(null),g=e.useCallback(async()=>{if(n.current)return;n.current=!0;const f=globalThis.location.hash||"#",r=new URLSearchParams(f.split("#")[1]),m=new URLSearchParams(globalThis.location.search);if(r.get("error")){t.debug(r.get("error_description")),c("Something went wrong");return}const i=r.get("access_token"),u=r.get("refresh_token");if(!i||!u){c("Access token or refresh token is missing");return}const{error:h}=await a.auth.setSession({access_token:i,refresh_token:u});if(h){t.debug(h.message),d.error("Something went wrong"),s(l.auth.supabase.signIn);return}const p=m.get("next")||l.dashboard.overview;s(p)},[a,s]);return e.useEffect(()=>{g().catch(t.error)},[]),o?k.jsx(w,{color:"error",children:o}):null}export{P as Page};
