import{cr as f,p as a,cs as p,b0 as b,r as e,aZ as i,bF as m,j as w,be as x}from"./index-C5-7V04H.js";let r;function y(){return r||(r=new f({authority:void 0,client_id:void 0,redirect_uri:new URL(a.auth.cognito.callback,p()).toString(),response_type:"code",scope:"email openid phone"}),r)}function R(){const s=y(),t=b(),n=e.useRef(!1),[o,l]=e.useState(null),u=e.useCallback(async()=>{if(n.current)return;n.current=!0;const c=new URLSearchParams(globalThis.location.search),g=c.get("code"),d=c.get("state");if(!g||!d){l("Code or state is missing");return}try{await s.signinCallback(globalThis.location.href),t(a.dashboard.overview)}catch(h){i.error(h),m.error("Something went wrong"),t(a.home)}},[t,s]);return e.useEffect(()=>{u().catch(i.error)},[]),o?w.jsx(x,{color:"error",children:o}):null}export{R as Page};
