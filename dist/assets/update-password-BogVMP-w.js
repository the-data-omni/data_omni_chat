import{r as o,b0 as P,p as m,j as s,S as p,B as S,R as y,cu as v,T as C,ak as h,al as u,am as x,bH as w,be as k,b as B,H as F,a as L}from"./index-C5-7V04H.js";import{S as U}from"./split-layout-C-JKiTiu.js";import{u as H,C as j,t as E,z as t}from"./index-DvGAAjB3.js";import{c as I}from"./client-B6InYSCG.js";const R=t.object({password:t.string().min(6,{message:"Password should be at least 6 characters"}),confirmPassword:t.string()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),T={password:"",confirmPassword:""};function z(){const[e]=o.useState(I()),n=P(),[f,i]=o.useState(!1),{control:d,handleSubmit:g,setError:l,formState:{errors:r}}=H({defaultValues:T,resolver:E(R)}),b=o.useCallback(async a=>{i(!0);const{error:c}=await e.auth.updateUser({password:a.password});if(c){l("root",{type:"server",message:c.message}),i(!1);return}n(m.dashboard.overview)},[e,n,l]);return s.jsxs(p,{spacing:4,children:[s.jsx("div",{children:s.jsx(S,{component:y,href:m.home,sx:{display:"inline-block",fontSize:0},children:s.jsx(v,{colorDark:"light",colorLight:"dark",height:32,width:122})})}),s.jsx(C,{variant:"h5",children:"Update password"}),s.jsx("form",{onSubmit:g(b),children:s.jsxs(p,{spacing:2,children:[s.jsx(j,{control:d,name:"password",render:({field:a})=>s.jsxs(h,{error:!!r.password,children:[s.jsx(u,{children:"Password"}),s.jsx(x,{...a,type:"password"}),r.password?s.jsx(w,{children:r.password.message}):null]})}),s.jsx(j,{control:d,name:"confirmPassword",render:({field:a})=>s.jsxs(h,{error:!!r.confirmPassword,children:[s.jsx(u,{children:"Confirm password"}),s.jsx(x,{...a,type:"password"}),r.confirmPassword?s.jsx(w,{children:r.confirmPassword.message}):null]})}),r.root?s.jsx(k,{color:"error",children:r.root.message}):null,s.jsx(B,{disabled:f,type:"submit",variant:"contained",children:"Update password"})]})})]})}const A={title:`Update password | Supabase | Auth | ${L.name}`};function $(){return s.jsxs(o.Fragment,{children:[s.jsx(F,{children:s.jsx("title",{children:A.title})}),s.jsx(U,{children:s.jsx(z,{})})]})}export{$ as Page};
