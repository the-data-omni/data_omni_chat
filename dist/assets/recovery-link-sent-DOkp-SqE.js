import{r as a,p as n,bF as b,j as e,S as o,be as p,b as g,T as r,B as x,H as y,a as k,R as m,cu as v,W as S,bq as P}from"./index-C5-7V04H.js";import{S as w}from"./split-layout-C-JKiTiu.js";import{c as R}from"./client-B6InYSCG.js";function E({children:s,email:t}){const[c]=a.useState(R()),[j,i]=a.useState(!1),[l,d]=a.useState(),f=a.useCallback(async()=>{if(!t)return;i(!0),d(void 0);const h=new URL(n.auth.supabase.callback,globalThis.location.origin);h.searchParams.set("next",n.auth.supabase.updatePassword);const{error:u}=await c.auth.resetPasswordForEmail(t,{redirectTo:h.href});if(u){d(u.message),i(!1);return}i(!1),b.success("Recovery link sent")},[c,t]);return e.jsxs(o,{spacing:1,children:[l?e.jsx(p,{color:"error",children:l}):null,e.jsx(g,{disabled:!t||j,onClick:f,variant:"contained",children:s}),e.jsx(r,{sx:{textAlign:"center"},variant:"body2",children:"Wait a few minutes then try again"})]})}const L={title:`Recovery link sent | Supabase | Auth | ${k.name}`};function F(){const{email:s}=C();return s?e.jsxs(a.Fragment,{children:[e.jsx(y,{children:e.jsx("title",{children:L.title})}),e.jsx(w,{children:e.jsxs(o,{spacing:4,children:[e.jsx("div",{children:e.jsx(x,{component:m,href:n.home,sx:{display:"inline-block",fontSize:0},children:e.jsx(v,{colorDark:"light",colorLight:"dark",height:32,width:122})})}),e.jsx(r,{variant:"h5",children:"Recovery link sent"}),e.jsxs(o,{spacing:1,children:[e.jsxs(r,{children:["If an account exists with email"," ",e.jsxs(r,{component:"span",variant:"subtitle1",children:['"',s,'"']}),", you will receive a recovery email."]}),e.jsx("div",{children:e.jsx(S,{component:m,href:n.auth.supabase.resetPassword,variant:"subtitle2",children:"Use another email"})})]}),e.jsx(E,{email:s,children:"Resend"})]})})]}):e.jsx(x,{sx:{p:3},children:e.jsx(p,{color:"error",children:"Email is required"})})}function C(){const[s]=P();return{email:s.get("email")||void 0}}export{F as Page};
